---
id: fastlane
slug: fastlane.html
title: fastlane
author: 鲤鱼
tag:
  - fastlane
---


[Fastlane实战（一）：移动开发自动化之道 - 简书.pdf](https://www.yuque.com/attachments/yuque/0/2021/pdf/1424701/1626226649232-2be5b2cb-2941-419f-a979-8a831dd4082d.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2021%2Fpdf%2F1424701%2F1626226649232-2be5b2cb-2941-419f-a979-8a831dd4082d.pdf%22%2C%22name%22%3A%22Fastlane%E5%AE%9E%E6%88%98%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B9%8B%E9%81%93+-+%E7%AE%80%E4%B9%A6.pdf%22%2C%22size%22%3A1381476%2C%22type%22%3A%22application%2Fpdf%22%2C%22ext%22%3A%22pdf%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22u1453caa2-2e11-4f7a-a36f-020736d4693%22%2C%22taskType%22%3A%22transfer%22%2C%22id%22%3A%22u36af9031%22%2C%22card%22%3A%22file%22%7D)
[Fastlane实战（一）：移动开发自动化之道](https://www.jianshu.com/p/1aebb0854c78)
​

[Fastlane实战（二）：Action和Plugin机制 - 简书.pdf](https://www.yuque.com/attachments/yuque/0/2021/pdf/1424701/1626226681892-453a5906-837b-4793-bfb9-1a9d2442ecef.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2021%2Fpdf%2F1424701%2F1626226681892-453a5906-837b-4793-bfb9-1a9d2442ecef.pdf%22%2C%22name%22%3A%22Fastlane%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAction%E5%92%8CPlugin%E6%9C%BA%E5%88%B6+-+%E7%AE%80%E4%B9%A6.pdf%22%2C%22size%22%3A1189422%2C%22type%22%3A%22application%2Fpdf%22%2C%22ext%22%3A%22pdf%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22uc980d1f0-d004-42b8-b28f-3308672ea4e%22%2C%22taskType%22%3A%22upload%22%2C%22id%22%3A%22ucce090a0%22%2C%22card%22%3A%22file%22%7D)
[Fastlane实战（二）：Action和Plugin机制](https://www.jianshu.com/p/0520192c9bd7)
​

[Fastlane实战（四）：自动化测试篇 - 简书.pdf](https://www.yuque.com/attachments/yuque/0/2021/pdf/1424701/1626226687292-fb60d765-0b4d-41c7-bf81-300d84d87fdc.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2021%2Fpdf%2F1424701%2F1626226687292-fb60d765-0b4d-41c7-bf81-300d84d87fdc.pdf%22%2C%22name%22%3A%22Fastlane%E5%AE%9E%E6%88%98%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%AF%87+-+%E7%AE%80%E4%B9%A6.pdf%22%2C%22size%22%3A1075367%2C%22type%22%3A%22application%2Fpdf%22%2C%22ext%22%3A%22pdf%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22u05ebfd2c-bea1-4b6e-8970-457d0af3e7b%22%2C%22taskType%22%3A%22upload%22%2C%22id%22%3A%22ud8d2cfef%22%2C%22card%22%3A%22file%22%7D)
[Fastlane实战（四）：自动化测试篇](https://www.jianshu.com/p/607363a3fd46)
​

[Fastlane实战（五）：高级用法 - 简书.pdf](https://www.yuque.com/attachments/yuque/0/2021/pdf/1424701/1626226690913-fa4380d5-47a1-4990-85c1-105493e5bfc0.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2021%2Fpdf%2F1424701%2F1626226690913-fa4380d5-47a1-4990-85c1-105493e5bfc0.pdf%22%2C%22name%22%3A%22Fastlane%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95+-+%E7%AE%80%E4%B9%A6.pdf%22%2C%22size%22%3A867837%2C%22type%22%3A%22application%2Fpdf%22%2C%22ext%22%3A%22pdf%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22uedcd60e7-1774-4a7b-93dd-c9b540cd524%22%2C%22taskType%22%3A%22upload%22%2C%22id%22%3A%22u77f9723a%22%2C%22card%22%3A%22file%22%7D)
[Fastlane实战（五）：高级用法](https://www.jianshu.com/p/faae6f95cbd8)
​

[iOS 持续交付之 Fastlane.pdf](https://www.yuque.com/attachments/yuque/0/2021/pdf/1424701/1626226812577-f88783cb-af35-443e-98e2-bf13e4337485.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2021%2Fpdf%2F1424701%2F1626226812577-f88783cb-af35-443e-98e2-bf13e4337485.pdf%22%2C%22name%22%3A%22iOS+%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E4%B9%8B+Fastlane.pdf%22%2C%22size%22%3A1677789%2C%22type%22%3A%22application%2Fpdf%22%2C%22ext%22%3A%22pdf%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22uc3bcf2b0-f4f0-46f5-ab01-768cbc83106%22%2C%22taskType%22%3A%22upload%22%2C%22id%22%3A%22u17fc0430%22%2C%22card%22%3A%22file%22%7D)


Github
[Fastfiles-知乎的文件](https://github.com/thierryxing/Fastfiles)​
[官方示例](https://github.com/fastlane/examples)
​

[手动解析本地证书](https://github.com/bumaociyuan/fastlane-match-import)
[fastlane之使用match同步证书和配置文件](https://zrocky.com/2018/09/how-to-use-fastlane-match/)
[使用fastlane match自动和手动管理证书](https://www.jianshu.com/p/e9f403fa453d)
### 
## 
## 建议使用：依赖现有证书支持 fastlane match
## 手动配置证书方式一
### 1. 查询 cer_id
每个证书文件都有特定的 ID，推送之前我们还需要修改加密证书的文件名。该 ID 在开发者网站证
详情那一页的网址最后面展示。就是下面码糊住的那一块
![image.png](./../../assets/Fastlane/fastlane_01.png)   
### 2. ation
```jsx
require 'match'

git_url = './../gitrepo/.git'
shallow_clone = false
branch = 'master'
ENV["MATCH_PASSWORD"] = 'yfsb'
    
default_platform(:mac)  
   
platform :mac do
    
	desc "Encrypt git"
    lane :test do  
        UI.success "Encrypting git!"
        storage = Match::Storage.for_mode("git", { git_url: git_url, shallow_clone: shallow_clone, git_branch: branch, clone_branch_directly: true})  
        storage.download
        encryption = Match::Encryption.for_storage_mode("git", { git_url: git_url, working_directory: storage.working_directory})
        encryption.decrypt_files
        files_to_commit = Dir[File.join(storage.working_directory, "**", "*.{cer,p12,mobileprovision}")]
        if files_to_commit.count > 0 # && !params[:readonly]
          password = "#{ENV["MATCH_PASSWORD"]}"
          ncryption.clear_password
          encryption.store_password(password)
          encryption.encrypt_files
          #files_to_commit = Dir[File.join(storage.working_directory, "**", "*.{cer,p12,mobileprovision}")]
          storage.save_changes!(files_to_commit: files_to_commit)
        end
	end 
end
```
> 参考链接
> [手动加密/解密存储库](https://gitmemory.com/issue/fastlane/fastlane/14832/508186744)
> [fastlane手动解析](https://docs.fastlane.tools/advanced/other/#manually-manage-the-fastlane-match-repo)
> [使用Fastlane与现有证书匹配，而不撤销它们](https://jonathancardoso.com/en/blog/using-fastlane-match-existing-certificates-without-revoking/)
> [使用现有的证书创建/修改fastlane match证书库](https://www.jianshu.com/p/a89e0529d88d)

## 手动配置证书方式二
### 1. 查询 cer_id
每个证书文件都有特定的 ID，推送之前我们还需要修改加密证书的文件名。该 ID 在开发者网站证
详情那一页的网址最后面展示。就是下面码糊住的那一块
![image.png](./../../assets/Fastlane/fastlane_02.png) 
​

### 2. 加密证书
从Apple Developer中下载现有的证书及mobileprovision文件，将证书导入到钥匙中，并生成p12文件。得到的证书和配置文件还不能被match识别，需要通过加密命令加密后才符合match的验证要求，其中使用到的命令有：
#### 2.1 加密证书

- openssl pkcs12 -nocerts -nodes -out key.pem -in {证书}.p12 ：生成 pem 文件
- openssl aes-256-cbc -k {密码} -in key.pem -out {cert_id}.p12 -a：生成加密后的 p12
- openssl aes-256-cbc -k {密码} -in {证书}.cer -out {cert_id}.cer -a ：生成加密后的证书，其中 cer_id，是第一部获取的 id
#### 2.2 加密配置文件

- 配置文件起名需要符合规则 {Development/ADHoc/AppStore/InHouse}_bundleId.mobileprovision
- openssl aes-256-cbc -k {密码} -in xxxx.mobileprovision -out Development_bundlleId.mobileprovision -a
## 3. 将加密好的证书和配置文件放到对应目录中，并提交上传仓库


## pod 相关
[一行命令发布 Pod 框架](https://ripperhe.com/2017/03/30/fastlane-pod/#书写-fastfile)
​

[iOS 组件化开发（四）：fastlane实现pod自动化](https://cloud.tencent.com/developer/article/1154048)
# ​

